{
    "title": "Apply for compensation",
    "x-uri": "apply-for-compensation",
    "x-instanceId": "blah123",
    "answers": [],
    "history": [],
    "sections": {
        "p-applicant-declaration": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/declarations",
            "title": "Declaration",
            "type": "object",
            "required": ["q-declaration"],
            "additionalProperties": false,
            "properties": {
                "declarationtext": {
                    "type": "string",
                    "classification": "markup",
                    "enum": [
                        "<p><strong>By continuing you confirm that the information you will give is true as far as you know.</strong></p><warning>You could be prosecuted or get less compensation if you give false or misleading information.</warning>"
                    ],
                    "default": "/enum/0"
                },
                "q-declaration": {
                    "type": "boolean",
                    "title": "Do you agree?",
                    "errorMessages": {
                        "required": "You must agree to be able to continue"
                    }
                }
            }
        },
        "p--who-is-applying": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/who-are-you-applying-for",
            "type": "object",
            "required": ["q-who-are-you-applying-for"],
            "additionalProperties": false,
            "properties": {
                "q-who-are-you-applying-for": {
                    "title": "Who are you applying for?",
                    "type": "array",
                    "uniqueItems": true,
                    "items": {
                        "oneOf": [
                            {
                                "title": "Myself",
                                "enum": ["mysef"]
                            },
                            {
                                "title": "Someone else",
                                "enum": ["someone-else"]
                            }
                        ]
                    },
                    "errorMessages": {
                        "required": "Tell us who you are applying for"
                    }
                }
            }
        },
        "p-applicant-are-you-a-british-citizen": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/are-you-a-british-citizen",
            "type": "object",
            "required": ["q-are-you-a-british-citizen"],
            "additionalProperties": false,
            "properties": {
                "q-are-you-a-british-citizen": {
                    "type": "boolean",
                    "title": "Are you a British citizen?",
                    "errorMessages": {
                        "required": "You need to tell us if you are a British citizen"
                    }
                }
            }
        },
        "p-applicant-have-you-even-been-convicted-of-a-crime": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/have-you-ever-been-convicted-of-a-crime",
            "type": "object",
            "required": ["q-have-you-ever-been-convicted-of-a-crime"],
            "additionalProperties": false,
            "properties": {
                "q-have-you-ever-been-convicted-of-a-crime": {
                    "type": "boolean",
                    "title": "Have you ever been convicted of a crime?",
                    "errorMessages": {
                        "required": "Tell us if you have been convicted of a crime"
                    }
                },
                "convicteddetails": {
                    "type": "string",
                    "classification": "markup",
                    "enum": [
                        "<details title='How do I know if my conviction is spent?' id='spent-convictions-description'><p>A conviction is spent when a period of time, known as the rehabilitation period, expires.  The length of this period depends on the type and length of your sentence.</p><p>If you were sentenced to 4 years or more in prison in England and Wales, or 30 months or more in Scotland, your conviction will never be spent.</p></details>"
                    ],
                    "default": "/enum/0"
                }
            }
        },
        "p--before-you-continue": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/before-you-continue",
            "type": "object",
            "title": "Before you continue",
            "additionalProperties": false,
            "properties": {
                "q-crimedetails": {
                    "type": "string",
                    "classification": "markup",
                    "enum": [
                        "<p><strong>On the next few pages we will ask questions about the crime.</strong></p><p>We understand talking about the crime may be difficult.</p><p>Organisations such as the Victim's Information Service can offer specialist help and advice.</p>"
                    ],
                    "default": "/enum/0"
                }
            }
        },
        "p--was-the-crime-reported-to-the-police": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/was-the-crime-reported-to-the-police",
            "type": "object",
            "required": ["q-was-the-crime-reported-to-the-police"],
            "additionalProperties": false,
            "properties": {
                "q-was-the-crime-reported-to-the-police": {
                    "type": "boolean",
                    "title": "Was the crime reported to the police?",
                    "errorMessages": {
                        "required": "Select if you reported the crime to the police or not"
                    }
                }
            }
        },
        "p--when-was-the-crime-reported": {
            "$schema": "http://json-schema.org/draft-04/schema#",
            "id": "http://localhost:3000/schema/definitions/when-was-the-crime-reported-to-the-police",
            "type": "object",
            "required": ["q-when-was-the-crime-reported-to-the-police"],
            "additionalProperties": false,
            "properties": {
                "q-when-was-the-crime-reported-to-the-police": {
                    "type": "string",
                    "format": "date-time",
                    "title": "When was the crime reported to the police?",
                    "errorMessages": {
                        "required": "Enter the date you reported the crime to the police",
                        "format": "Enter a valid date, not that thing you just tried....."
                    }
                }
            }
        }
    },
    "routes": {
        "initial": "p-applicant-declaration",
        "states": {
            "p-applicant-declaration": {
                "on": {
                    "ANSWER": [
                        {
                            "target": "p--who-is-applying",
                             "cond": ["==", "$.p-applicant-declaration.q-declaration.value", "true"]
                        },
                        {
                            "target": "p--before-you-continue",
                            "cond": ["==", "$.p-applicant-declaration.q-declaration.value", "false"]
                        }
                    ]
                }
            },
            "section3": {}
        }
    }
}
